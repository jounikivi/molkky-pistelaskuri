<!doctype html>
<html lang="fi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>M√∂lkky ‚Äì Dev-testi (Vaihe 2)</title>
</head>
<body>
  <h1>M√∂lkky ‚Äì Pelitila & vuorotus (dev)</h1>
  <p>Avaa konsoli (F12 ‚Üí Console). Alla k√§ytt√∂ohjeet:</p>
  <pre>
import { ThrowType } from "./js/rules.js";
import {
  loadOrInit, hasSavedGame, getState,
  addPlayer, startGameShuffleOrder, getCurrentPlayer,
  applyThrowToCurrentPlayer, resetAll
} from "./js/gameState.js";

loadOrInit();              // lataa tallennettu peli tai aloita tyhj√§
hasSavedGame();            // true/false

addPlayer("Matti");
addPlayer("Maija");
addPlayer("Pekka");

startGameShuffleOrder();   // arpoo vuoroj√§rjestyksen, palauttaa aloittajan
getCurrentPlayer();        // tarkista vuorossa oleva

// Heittoesimerkkej√§:
//  - huti:  MISS, 0
//  - yksi keila (numero): SINGLE_PIN, 12
//  - useita (m√§√§r√§):      MULTI_PINS, 5
applyThrowToCurrentPlayer(ThrowType.MISS, 0);
applyThrowToCurrentPlayer(ThrowType.SINGLE_PIN, 12);
applyThrowToCurrentPlayer(ThrowType.MULTI_PINS, 5);

getState();                // katso koko tila
// P√§ivit√§ sivu ja tee loadOrInit(); ‚Üí jatkaa siit√§ mihin j√§it

resetAll();                // aloita alusta
  </pre>

  <script type="module">
    import { ThrowType } from "./js/rules.js";
    import {
      loadOrInit, hasSavedGame, getState,
      addPlayer, startGameShuffleOrder, getCurrentPlayer,
      applyThrowToCurrentPlayer, resetAll
    } from "./js/gameState.js";

    // Automaattinen init k√§ynnistyksess√§
    const loaded = loadOrInit();
    console.log(loaded ? "üîÑ Jatketaan tallennettua peli√§" : "üÜï Uusi peli k√§ynnistetty");
    console.log("Onko tallennettu peli olemassa? ", hasSavedGame());
    console.log("Nykytila:", getState());

    // Pieni demo (kommentoi pois, jos haluat k√§sin kokeilla rivilt√§-riville):
    if (!loaded) {
      addPlayer("Matti");
      addPlayer("Maija");
      addPlayer("Pekka");
      const first = startGameShuffleOrder();
      console.log("Aloittaja:", first);

      // kolme testiheittoa
      console.log("Heitto 1:", applyThrowToCurrentPlayer(ThrowType.MISS, 0));
      console.log("Heitto 2:", applyThrowToCurrentPlayer(ThrowType.SINGLE_PIN, 12));
      console.log("Heitto 3:", applyThrowToCurrentPlayer(ThrowType.MULTI_PINS, 5));
      console.log("Tila heittojen j√§lkeen:", getState());
    }
  </script>
</body>
</html>
